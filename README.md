# 多功能计算器

* 此代码是作者出于兴趣爱好自己编写的。转载请注明。

* 作者的邮箱：contactwangpai@163.com

---

分支 M # 最新版本 ` M.3.1 ` 支持的功能：（以用户的角度）

1. 操作数支持多位运算。一个操作数可以是十位数或者更高位数的数

2. 操作数支持小数点、负数，运算结果支持显示小数、负数

3. 表达式可以含多个操作数、多个运算符，还可以带括号

4. 对输入的表达式提供实时自动语法检查与错误定位，并支持检查后的修改

5. 对输入无误的表达式进行实时自动计算，并可选显示完整详细的计算过程

6. 使用 GUI 界面来显示上面的表达式输入、报错显示、运算过程

7. 提供界面按钮以供鼠标点击输入。按钮功能包含击键变色、文本全选、光标左移与右移，选中文本的删除与替换、撤消与重做

8. 提供右键菜单以供撤消、重做、剪切、复制、粘贴、删除、全选

9. 支持键盘输入

10. 提供 Windows 下免安装 JDK 直接运行的 EXE 文件。此 EXE 程序拥有程序名、自制程序图标


---



# 本次更新介绍

<p align="right">——2021年9月28日</p>

代码介绍：

&emsp;&emsp;本工程是在 本分支的上一版本的基础之上进行的升级。

&emsp;&emsp;相对于版本 ` M.3.0 `，本版本 ` M.3.1 ` 的改进主要有：

* 增加了撤消、重做按钮。且为了这两个功能的正常使用，重制了 TextBox 中大多数的方法。

* 引入了多线程技术。将一些非强同步的耗时操作置入线程池中，也因此对一些全局变量使用了单例模式下的“双重检查锁定”来保证线程安全，对 UI 使用方法 `Platform.runLater(() -> {...})` 来保证线程安全。

* 使用了新 Spring 注解 `@Qualifier`、` @Autowired` 取代了原来的非 Spring 注解 `@Resource`。因为这样做了之后就可以减少依赖包的范围。

* 提供了用于生成完整依赖的 Maven 插件 `maven-dependency-plugin`。

* 本次版本 ` M.3.1 ` 与 版本 ` M.2.3 ` UI 界面启动用时对比：

  - ` M.3.1 ` 的机器测试时间（平均值）：2.800s，人工测试时间（平均值）：3.77s

    ` M.2.3 ` 的机器测试时间（平均值）：3.526s，人工测试时间（平均值）：4.03s

  - 机器测试时间：在代码中计算启动用时。

    人工测试时间：手动使用手机秒表和人的视觉反应测得。

  - 程序运行方法：各自生成 JAR 包，通过命令行的命令来运行。

  - 版本 ` M.3.1 ` 的技术或环境：Java 17，JavaFX 17-ea+11
  
    版本 ` M.2.3 ` 的技术或环境：Java 11，Java Swing，Java 反射
    
  - 版本 ` M.3.1 ` 的 JAR 大小：12.6 MB
  
    版本 ` M.2.3 ` 的 JAR 大小：3.93 MB

---

&emsp;&emsp;本版本的已知不足与预想的改进方案：

* 本版暂无

---

&emsp;&emsp;未来版本可能会实现的功能：

* 提供文本的剪切、粘贴按钮（已提供剪切、粘贴右键菜单与快捷键）


---

* 本项目使用的开发环境：
  - JDK 17 2021-09-14
  - JavaFX 17-ea+11
  - IntelliJ IDEA 2021.2.2 (Ultimate Edition)

---

* 核心 Java 语言代码文件：

* 程序启动入口 API：

  >  模块 `calculator-entrance` 中的
  >
  >  > 包`org.wangpai.calculator`中的
  >  >
  >  > > 类 `CalculatorApplication` 中的
  >  > >
  >  > > > 静态方法 `main`

---

* 总计：7798
* Java 代码：7222
  - 测试代码：1857

* ML、CSS 代码：576

  - FXML：204
  - CSS：33
  - Spring 配置、POM 文件：339

---

* 程序屏幕输入示例：`2334.623*6345-234/1234+234*(254-45.242)=`

---

* 一些程序截图片段：

---

![](img_md/202108927_1.png)

---

![](img_md/202108927_2.png)

---

![](img_md/202108927_3.png)

---
